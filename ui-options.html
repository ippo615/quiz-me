<html>
  <style type="text/css">

  body { font-size:24px; width:640px; }
  .input-group {
	position: relative;
	padding: 0.2em;
	width: 100%;
  }
  .input-label {
	width: 8em;
	text-overflow: ellipsis;
	overflow: hidden;
	display: block;
	vertical-align: middle;
	position:relative;
	z-index: 10;
	height: 1.1em;
  }
  .input-text, .input-select, .input-option, .input-range, .checkbox-status {
	border: medium none;
	font-size: 1em;
	vertical-align: middle;
	opacity: 0.6;
	width: 90%;
	position: absolute;
	top:0.1em;
	left:0;
	padding-left: 8em;
	z-index: 1;
	box-sizing: border-box;
  }
/*
  label {
	width: 8em;
	text-overflow: ellipsis;
	overflow: hidden;
	display: block;
	vertical-align: middle;
	position:relative;
	z-index: 10;
	height: 1.1em;
  }
  input, select, option, .checkbox-status {
	border: medium none;
	font-size: 1em;
	vertical-align: middle;
	opacity: 0.6;
	width: 90%;
	position: absolute;
	top:0.1em;
	left:0;
	padding-left: 8em;
	z-index: 1;
	box-sizing: border-box;
  }
  select {
	background: none;
	width: 100%;
  }
  input[type="checkbox"] {
    display:none;
  }
  input[type="checkbox"] + .checkbox-status:after {
    content: 'no'
  }
  input[type="checkbox"]:checked + .checkbox-status:after {
    content: 'yes'
  }
*/  
  </style>
  <body style="background-color: #FFF;">
	
    <form id="form-1" style="display: inline-block; background-color:#FFF; width:100%;">
        	<div class="input-group">
        		<label for="test-1">Number</label>
            	<input type="number" min="5" max="18" step="0.5" value="9" name="test-1" id="test-1" />
            </div>
            <div class="input-group">
            	<label for="test-2">Range</label>
            	<input type="range" min="5" max="18" step="0.5" value="9" name="test-2" id="test-2" />
            </div>
            <div class="input-group">
            	<label for="test-3">Color</label>
            	<input type="color" name="test-3" id="test-3" value="red" />
            </div>
            <div class="input-group">
                <label for="test-4">Select</label>
            	<select id="test-4">
                	<option value="1.0">One</option>
                    <option value="2.0">two</option>
                    <option value="3.0">three</option>
                    <option value="4.0">four</option>
                    <option value="5.0">five</option>
                </select>
            </div>
	
            <div class="input-group">
                <label for="test-5">check</label>
            	<input type="checkbox" id="test-5" />
				<div class="checkbox-status"></div>
            </div>

      <div id="select-output">xxx</div>
    </form>
	
	<form id="output"></form>
    <script type="text/javascript">
	/*	
      document.getElementById('test-4').onchange = function(){
      	var domSelect = document.getElementById('test-4');
        var selectedIndex = domSelect.selectedIndex;
        var value = domSelect.options[selectedIndex].value;
      	document.getElementById('select-output').innerHTML = value;
      };
      var ui = {
      	x: 5,
        y: 10,
        name: 'Andy',
        isCorrect: true,
        numbers: [1,2,3,4,5]
      };
      var inputs = [];
      inputs.push( createInputSelect('test-01','Dynamic Select',{
      	hello: 1.0,
        goodbye: 2.0,
        something: 3.0,
        other: 4.0,
        again: 5.0
      }) );
      inputs.push( createInputSlider('test-slide-01','Default SLider', {}) );
      inputs.push( createInputSlider('test-slide-02','Slider value=10', {value:10}) );
      inputs.push( createInputSlider('test-slide-03','Min and max', {min:0,max:10,value:10}) );
      inputs.push( createInputSlider('test-slide-04','Steps', {min:0,max:100,value:10,step:20}) );
	  inputs.push( createInputText('test-text-01','Name:', {value:'Andy'}) );
      inputs.push( createInputText('test-text-02','Search:', {placeholder:'for something'}) );
      inputs.push( createInputColor('test-color-01','Color', {value:'red'}) );
      //document.getElementById('output').innerHTML = inputs.join(' ');
	*/
/*
function createInputColor(id, label, options) {
	var html = '';
	html += '<div class="input-group">';
	html += '<label for="' + id + '">' + label + '</label>';

	html += '<input type="color" ';
	html += 'name="' + id + '" ';
	html += 'id="' + id + '" ';
	if (options.hasOwnProperty('placeholder')) {
		html += 'placeholder="' + options.placeholder + '" ';
	}
	if (options.hasOwnProperty('value')) {
		html += 'value="' + options.value + '" ';
	}
	html += '/>'
	html += '</div>';
	return html;
}
function OptionSlider(name, value, min, max, step) {
	this.type = 'slider';
	this.name = name;
	this.value = value;
	this.min = min;
	this.max = max;
	this.step = step;
	return this;
}

function OptionSelect(name, config) {
	this.type = 'select';
	this.name = name;
	this.config = config;
	return this;
}

function UiOption(name, value, config) {
	this.name = name;
	this.defaultValue = value;
	this.config = config;
	return this;
}
options.push(new OptionSlider('minNumber', 0, 0, 1000, 1));
options.push(new OptionSlider('maxNumber', 1000, 0, 1000, 1));
options.push(new OptionSelect('clockFaceColor', {
	white: '#FFF',
	red: '#F00',
	orange: '#F80',
	yellow: '#FF0',
	lime: '#0F0',
	green: '#080',
	aqua: '#0FF',
	blue: '#00F',
	purple: '#F0F',
	brown: '#888',
	gray: '#888',
	black: '#000'
}));
*/
	//console.info( formToObject( document.getElementById('form-1') ) );

function getSelectValue(domSelect) {
	var selectedIndex = domSelect.selectedIndex;
	return domSelect.options[selectedIndex].value;
}

function createInputText(id, label, options) {
	var html = '';
	html += '<div class="input-group">';
	html += '<label class="input-label" for="' + id + '">' + label + '</label>';
	//value,min,max,steps
	html += '<input type="text" class="input-text" ';
	html += 'name="' + id + '" ';
	html += 'id="' + id + '" ';
	if (options.hasOwnProperty('placeholder')) {
		html += 'placeholder="' + options.placeholder + '" ';
	}
	if (options.hasOwnProperty('value')) {
		html += 'value="' + options.value + '" ';
	}
	html += '/>'
	html += '</div>';
	return html;
}



function createInputSlider(id, label, options) {
	var html = '';
	html += '<div class="input-group">';
	html += '<label for="' + id + '" class="input-label">' + label + '</label>';
	//value,min,max,steps
	html += '<input type="range" class="input-range" ';
	html += 'name="' + id + '" ';
	html += 'id="' + id + '" ';
	if (options.hasOwnProperty('min')) {
		html += 'min="' + options.min + '" ';
	}
	if (options.hasOwnProperty('max')) {
		html += 'max="' + options.max + '" ';
	}
	if (options.hasOwnProperty('step')) {
		html += 'step="' + options.step + '" ';
	}
	if (options.hasOwnProperty('value')) {
		html += 'value="' + options.value + '" ';
	}
	html += '/>'
	html += '</div>';
	return html;
}

function createInputSelect(id, label, options) {
	var html = '';
	html += '<div class="input-group">';
	html += '<label for="' + id + '" class="input-label">' + label + '</label>';
	html += '<select name="' + id + '" id="' + id + '" class="input-select">';
	var prop;
	for (prop in options) {
		if (options.hasOwnProperty(prop)) {
			html += '<option value="' + options[prop] + '" class="input-option">';
			html += prop;
			html += '</option>';
		}
	}
	html += '</select>';
	html += '</div>';
	return html;
}

function formToObject(form) {
	var inputs = form.getElementsByTagName('input');
	var selects = form.getElementsByTagName('select');
	var object = {};
	var dom, i, l = inputs.length;
	for (i = 0; i < l; i += 1) {
		dom = inputs[i];
		object[dom.id] = dom.value;
	}
	l = selects.length;
	for (i = 0; i < l; i += 1) {
		dom = selects[i];
		object[dom.id] = getSelectValue(dom);
	}
	return object;
}

function optionsToForm(options) {
	var html = '';
	var i, opt, l = options.length;
	for (i = 0; i < l; i += 1) {
		opt = options[i];
		if (opt.type === 'slider') {
			html += createInputSlider(opt.name, opt.name, {
				name: opt.name,
				value: opt.value,
				min: opt.min,
				max: opt.max,
				step: opt.step
			});
		} else if (opt.type === 'select') {
			html += createInputSelect(opt.name, opt.name, opt.config);
		}
	}
	return html;
}

var options = [];
options.push({
	name: 'minNumber',
	type: 'slider',
	min: 0,
	max: 1000,
	value: 0,
	step: 1
});
options.push({
	name: 'maxNumber',
	type: 'slider',
	min: 0,
	max: 1000,
	value: 0,
	step: 1
});
options.push({
	name: 'clockFaceColor',
	type: 'select',
	config: {
		white: '#FFF',
		red: '#F00',
		orange: '#F80',
		yellow: '#FF0',
		lime: '#0F0',
		green: '#080',
		aqua: '#0FF',
		blue: '#00F',
		purple: '#F0F',
		brown: '#888',
		gray: '#888',
		black: '#000'
	}
});

function setupForm(domForm, options, onUpdate) {
	var html = optionsToForm(options);
	html += '<button id="update-options">Update</button>'
	domForm.innerHTML = html;
	document.getElementById('update-options').onclick = function (e) {
		e.preventDefault();
		var options = formToObject(domForm);
		onUpdate(options);
	};
}
setupForm(document.getElementById('output'), options, function (options) {
	console.info(options);
});

    </script>
  </body>
</html>

